<!DOCTYPE html>
<html lang="en">

<head>
  <title></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="/assets/css/agenda.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/assets/icons/notebook.png">
</head>

<body>
  <button class="btn btn-secondary btn-lg" onclick="window.history.back()">Cerrar sesión.</button>
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-5 justify-content-center" id="addContactForm">
        <h2>Agregar contacto.</h2>
        <div id="divContactForm">
          <form class="needs-validation" method="post" action="/api/addContact" id="form" novalidate>
            <label for="contact">Nombre</label>
            <input type="text" id="name" name="name" placeholder="Contacto" class="form-control" required>
            <label for="lastName">Apellido</label>
            <input type="text" id="lastName" name="lastName" placeholder="Apellido" class="form-control" required>
            <label for="number">Número</label>
            <input type="number" id="number" name="number" placeholder="Número" class="form-control" required>
            <div class="invalid-feedback">
              Completa todos los campos.
            </div>
            <button type="button" id="addContact" class="btn btn-success">Agregar contacto.</button>
          </form>
          <form method="post" action="/agenda/configureAccount">
            <button type="submit" class="btn btn-warning" id="configureAccount">Configurar cuenta.</button>
          </form>
        </div>
      </div>
      <div class="col-7 justify-content-center table-responsive">
        <h2>Contactos.</h2>
        <div id="divContacts">
          <table class="table table-dark table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Nombre</th>
                <th scope="col">Apellido</th>
                <th scope="col">Número</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <% rows.forEach((index)=> { %>
                <tr>
                  <td scope="row" id="name">
                    <%=index.name%>
                  </td>
                  <td>
                    <%=index.lastName%>
                  </td>
                  <td>
                    <%=index.number%>
                  </td>
                  <td>
                    <form id="updateForm" method="post" action="/updateContact/<%=index.contactId%>"><button
                        type="submit" id="update<%=index.contactId%>" class="btn btn-primary">Actualizar</button></form>
                  </td>
                  <td>
                    <form id="deleteForm" method="post" action="/api/deleteContact/<%=index.contactId%>">
                      <button type="submit" id="delete<%=index.contactId%>" class="btn btn-danger"><img
                          src="/assets/icons/trash-bin.png" id="trashBin"></button>
                    </form>
                  </td>
                </tr>
                <%})%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
<script type="application/javascript" src="/assets/scripts/agenda.js"></script>

</html>
